(this.webpackJsonpchatroom=this.webpackJsonpchatroom||[]).push([[0],{132:function(e,t,a){e.exports=a(200)},137:function(e,t,a){},138:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),c=a.n(s),o=(a(137),a(7)),l=a(12),i=a(15),m=a(14),u=(a(138),a(20)),d=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).chartRef=r.a.createRef(),n.concepto=e.concepto,n.colors=e.colors,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.drawChart()}},{key:"getData",value:function(){var e=[];return this.concepto.cantidades.forEach((function(t){e.push({procedencia:t.procedencia.descripcion,cantidad:t.cantidad})})),e}},{key:"getTotal",value:function(){var e=0;return this.concepto.cantidades.forEach((function(t,a){e+=t.cantidad})),e}},{key:"drawChart",value:function(){var e=this.getData(),t=u.d().domain(e).range(this.colors),a=Math.min(250,250)/2-10,n=new Intl.NumberFormat("es-ES");0==this.concepto.tipo&&(n=new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}));var r=u.e(this.chartRef.current).append("svg").attr("width",250).attr("height",250).append("g").attr("transform","translate(125,125)");r.append("text").attr("text-anchor","middle").text(this.concepto.descripcion).attr("fill","#b0b0b0").attr("dy","-1em"),r.append("text").attr("text-anchor","middle").attr("font-size","20px").text(n.format(this.getTotal()));var s=u.c().value((function(e){return e.value.cantidad}))(u.b(e));r.selectAll("whatever").data(s).enter().append("path").attr("d",u.a().innerRadius(100).outerRadius(a)).attr("fill",(function(e){return t(e.data.key)})).style("opacity",.7);var c=u.e(this.chartRef.current).append("svg").attr("width",250).attr("height",40).append("g").attr("transform","translate(125,"+250/12+")");e.forEach((function(e,a){a<=0?c.append("text").text(e.procedencia).attr("fill",t(a.toString())).attr("dx","-5em").attr("font-size","20px"):c.append("text").text(e.procedencia).attr("fill",t(a.toString())).attr("font-size","20px")}))}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.chartRef,style:{display:"grid"}})}}]),a}(r.a.Component),h=a(81),f=a.n(h),v="/diagramas/conceptos",p=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={rawData:[]},n.colors=[["hsl(80, 100%, 50%)","hsl(80, 100%, 28%)"],["hsl(190, 100%, 50%)","hsl(190, 100%, 20%)"],["hsl(50, 100%, 50%)","hsl(15, 100%, 45%)"]],n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("http://localhost:8080"+v).then((function(t){e.setState({rawData:t.data})})).catch(console.log("Error"))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},this.state.rawData.map((function(t,a){return r.a.createElement("div",{className:"col-sm-4 col-md-4"},r.a.createElement(d,{colors:e.colors[a],concepto:t}))}))))}}]),a}(r.a.Component),g=a(84),b=a(4),E=a(32),y=a(33),N=a(82),C=a.n(N),w=a(83),k=a.n(w),x=1,O=2,j=function e(t,a,n,r){Object(o.a)(this,e),this.uname=t,this.message=a,this.type=n,this.color=r},R=null,S=function(){function e(t,a,n,r){var s=this;Object(o.a)(this,e),this.onConnect=function(){s.stompClient.subscribe(s.topic,s.onMessageReceived),s.stompClient.send(s.suscriveURL,{},JSON.stringify(new j(s.uname,null,x,s.color)))},this.onError=function(e){console.log("error al conectarse:"+e)},this.onMessageReceived=function(e){var t=JSON.parse(e.body);console.log("message",t)},this.uname=t,this.stompClient=null,this.suscriveURL=a,this.serverUrl=n,this.topic=r,this.connect();var c=this.randomBackground();this.color="".concat(c[0],",").concat(c[1],",").concat(c[2])}return Object(l.a)(e,[{key:"connect",value:function(e){if(e&&e.preventDefault(),this.uname){var t=new C.a(this.serverUrl);this.stompClient=k.a.over(t),this.stompClient.connect({},this.onConnect,this.onError)}}},{key:"randomBackground",value:function(){return[Math.floor(127*Math.random()),Math.floor(127*Math.random()),Math.floor(127*Math.random())]}},{key:"send",value:function(e,t,a){e.preventDefault();var n=t;if(n&&this.stompClient){var r=new j(this.uname,n,O,this.color);this.stompClient.send(a,{},JSON.stringify(r))}}}]),e}();var M=function(e){return R||(R=new S(e,"/app/chat.register","/xinderal/chat","/topic/public")),R},B=(a(194),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={messageBody:e.messageBody},n.bgc=e.gackGroundColor,n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"media message-container"},r.a.createElement("div",{style:{backgroundColor:"RGB(".concat(this.state.messageBody.color,")")},className:"mr-3 user-view"},this.state.messageBody.uname[0]),r.a.createElement("div",{className:"media-body"},r.a.createElement("div",{className:"mt-0"},this.state.messageBody.type===x?"".concat(this.state.messageBody.uname," se ha unido"):this.state.messageBody.message)))}}]),a}(r.a.Component)),U=(a(195),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onMessageReceived=function(e){var t=JSON.parse(e.body);n.state.messages.push(t),n.setState({messages:n.state.messages},(function(){return n.scrollToMyRef()}))},n.handleSend=function(e){e.preventDefault(),n.state.stompClientP.send(e,n.state.message,"/app/chat.send"),n.setState({message:""},(function(){return n.scrollToMyRef()}))},n.handleChange=function(e){n.setState({message:e.target.value})},n.handleKeyPressed=function(e){"Enter"===e.key&&n.handleSend(e)},n.scrollToMyRef=function(){var e=n.chatContainer.current.scrollHeight-n.chatContainer.current.clientHeight;n.chatContainer.current.scrollTo(0,e)},n.state={stompClientP:M(e.uname),message:null,messages:[],userAlias:e.uname[0]},n.state.stompClientP.onMessageReceived=n.onMessageReceived,n.chatContainer=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row chat-room"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body messages-container",ref:this.chatContainer},this.state.messages.map((function(e){return r.a.createElement(B,{messageBody:e})}))),r.a.createElement("div",{className:"card-body chatInput"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"form-group mx-sm-3 mb-2"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Mensaje",value:this.state.message,onChange:this.handleChange,onKeyPress:this.handleKeyPressed})),r.a.createElement("button",{type:"button",class:"btn btn-primary mb-2",onClick:function(t){e.handleSend(t)}},r.a.createElement(E.a,{icon:y.b}))))))}}]),a}(r.a.Component)),D=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={toggle:!1,registeredUser:!1,stompClient:null,uname:""},e.callbackFunctionRegistry=function(t){e.setState({registeredUser:t.registeredUser})},e.handleClick=function(){e.setState({toggle:!e.state.toggle})},e.handleRegistry=function(t){t.preventDefault(),e.state.uname&&e.setState({stompClient:M(e.state.uname),registeredUser:""!==e.state.uname})},e.handleChange=function(t){e.setState({uname:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"container-fluid"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Usuario"),r.a.createElement("input",{className:"form-control",id:"uname",type:"text",value:this.state.uname,onChange:this.handleChange})),r.a.createElement("button",{type:"buton",className:"btn btn-primary",onClick:function(t){e.handleRegistry(t)}},"Registrarse"))),a=null;a=this.state.registeredUser?r.a.createElement(U,{uname:this.state.uname}):t;var n=r.a.createElement("div",{className:"row",style:this.state.toggle?{}:{display:"none"}},a);return r.a.createElement("div",{className:"fixed-bottom d-flex align-items-end flex-column"},n,r.a.createElement("button",{onClick:function(){e.handleClick()},type:"button",className:"btn btn-info"},r.a.createElement(E.a,{icon:y.a})," Chat"))}}]),a}(r.a.Component);var T=function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",exact:!0,component:p})),r.a.createElement(D,null))))};a(198);var I=function(){return r.a.createElement("div",{className:"footer-copyright text-center py-3 fixed-bottom end-page"},"\xa9 2020 Copyright:",r.a.createElement("a",{className:"autor-tag",href:"#"}," Tona"))},J=(a(199),a(86)),P=a.n(J);var z=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light justify-content-between"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Navbar"),r.a.createElement("div",{className:"user-account-component row"},r.a.createElement("img",{src:P.a,className:"img-thumbnail user-img"}),r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Usuario")),r.a.createElement("div",{className:"row"},r.a.createElement("a",{href:"#"},"Cuenta"))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light justify-content-between"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Ubicaci\xf3n"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"#"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)")))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("header")),c.a.render(r.a.createElement(T,null),document.getElementById("root")),c.a.render(r.a.createElement(I,null),document.getElementById("footer")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a.p+"static/media/user_image.cc219bc5.png"}},[[132,1,2]]]);
//# sourceMappingURL=main.1a9b9da4.chunk.js.map